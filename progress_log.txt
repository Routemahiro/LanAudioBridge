2026-02-05
- UIリファクタ Phase2（Engine化）を着手。
  - `LanMicBridge/Engine/ReceiverEngine.cs` / `SenderEngine.cs` を追加して、受信/送信ロジックをFormから分離。
  - `LanMicBridge/Audio/AudioProcessor.cs` を追加（AGC/ゲイン/ソフトクリップ等をForm依存から切り離し）。
  - `Form1` は Engine を生成/設定してイベント購読し、UI更新に専念する形へ置換。
  - 旧ロジックの残骸（partial内の受信/送信ループ等）を削除してビルド警告を解消。
  - `dotnet build -c Release` でビルド成功（警告0/エラー0）。

- 音量/ノイズ改善（バランス案）
  - 送信側のゲイン二重適用を解消（`SenderEngine`）
  - Opusモードは無音でも毎フレーム送信（KeepAlive依存を減らし、欠損扱い→PLCノイズの原因を抑制）
  - `dotnet build -c Release` でビルド成功（警告0/エラー0）

- 音量/運用改善（unity/AGC/受信推奨）
  - UIの「100%」を unity(1.0) 基準に変更（`SendGainBasePercent`/`OutputGainBasePercent` を 100%基準へ）
  - 送信AGCの上限/閾値を見直し（maxBoost=24dB, noBoostBelow=-65dB）
  - 受信側の音声処理はデフォルトOFF、UI上で「OFF推奨」を明記
  - `dotnet build -c Release` でビルド成功（警告0/エラー0）

2026-02-07
- Phase4: エラー復旧導線の強化（案B実装）
  - トレイバルーン通知ヘルパー追加（`ShowBalloonNotification`、10秒間隔の連続通知抑制）
  - `SetStatus`（受信）に状態遷移バルーン通知追加（切断→再接続→復帰）
  - `SetSenderStatus`（送信）に状態遷移バルーン通知追加（切断→再接続→復帰）
  - `ShowAlert` からもバルーン通知を発行（トレイ格納中でもエラーに気づける）
  - Engine側エラーメッセージを「原因＋対処法」セットに全面改善
    - ReceiverEngine: 受信開始/受信中/出力初期化/チェック音のメッセージ改善
    - SenderEngine: 送信開始/送信中/録音停止/通信エラーのメッセージ改善
    - Form1.Receiver/Sender: 同上
  - `dotnet build` でビルド成功（警告0/エラー0）

